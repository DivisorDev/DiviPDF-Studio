<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>DiviPDF - All-in-one Free PDF and Image Tools</title>
  <style>
    :root {
      --main-bg: #181f29;
      --card-bg: #222C3A;
      --primary: #38b6ff;
      --secondary: #495475;
      --line: #38b6ff44;
    }
    body { margin: 0; padding: 0; background: var(--main-bg); color: #eee; font-family: "Segoe UI",Arial,sans-serif;}
    .centered { text-align: center; }
    .header {
      font-size: 2.7em;margin-top: 36px;
      color: var(--primary);text-shadow: 0 2px 12px #101d3e66;
      font-weight: bold;letter-spacing: 1px;
    }
    .subtitle { color: #aad7ff; margin: 10px auto 32px; font-size: 1.16em;}
    .content { display: flex; justify-content:center; gap:48px; margin: 0 auto 22px; }
    .card {
      background: var(--card-bg);
      border-radius: 14px;
      padding: 28px 28px 12px 28px;
      box-shadow: 0 2px 18px #2224;
      min-width: 280px; max-width: 320px;
    }
    .card h3 { color:var(--primary); margin: 0 0 14px 0; border-bottom: 1px solid var(--line); padding-bottom: 6px;}
    .tool-list { list-style: none; padding:0; margin:0;}
    .tool-list li {
      margin-bottom: 11px; color: #eaefff; font-size: 1.07em; cursor:pointer;
      border-radius: 5px; padding: 5px 10px 5px 3px; transition:.18s background;
      border-left: 3px solid #38b6ff22;
    }
    .tool-list li:hover { background: #283a53b5; }
    .divider { height:2px; background:var(--line); margin:35px auto 25px auto; max-width:620px; border-radius:2px;}
    .form-area { text-align: center; margin: 20px 0 18px 0;}
    .form-box {
      background: var(--card-bg);
      border-radius: 11px;
      box-shadow: 0 1px 12px #18326a88;
      padding: 26px 24px 18px 24px;
      max-width:370px; 
      margin:0 auto;
      display:inline-block;
    }
    .form-box label { display:block; margin-top:7px;color:#aad7ff;}
    .form-box input, .form-box select, .form-box button {
      margin-top:7px; border:none; outline: none; font-size:1.04em; 
      border-radius:5px; padding:8px 10px; background:#171e2b;color:#fff;
      margin-bottom: 8px;
    }
    .form-box button { background: var(--primary); color:#fff; font-weight:600; padding:9px 20px;cursor:pointer;transition:.21s background;}
    .form-box button:hover{background: #3293cc;}
    .resultmsg {margin-top:15px;}
    .success,.error,.processing{
      padding:8px 10px;border-radius:6px;display:inline-block;font-size:.95em;margin-bottom:14px;
    }
    .success{background:#244f29;color:#bcfcca;}
    .error{background:#792424;color:#ffc4c4;}
    .processing{background:#444813;color:#ffeead;}
    .footer {
      text-align:center;margin-top:32px;font-size:.99em;padding:16px 0 10px 0;color:#5cd7fc80;
      border-top:1px solid var(--line);
    }
    .footer span { color:#aad7ff; font-weight:500; }
    .credit a { color:var(--primary);text-decoration:none; }
    @media (max-width:900px){ .content{flex-direction:column; gap:18px;} .card{max-width:none;min-width:auto;}}
    @media (max-width:500px){ .form-box,.card{padding:10px 2vw;} .header{font-size:2em;}}
  </style>
</head>
<body>
  <div class="centered">
    <div class="header">DiviPDF</div>
    <div class="subtitle">All-in-one Free PDF and Image Tools</div>
  </div>
  <div class="divider"></div>
  <div class="content">
    <div class="card">
      <h3>PDF Tools</h3>
      <ul class="tool-list">
        <li onclick="showForm('pdfToWord')">PDF to Word</li>
        <li onclick="showForm('wordToPdf')">Word to PDF</li>
        <li onclick="showForm('mergePdf')">Merge PDF</li>
        <li onclick="showForm('compressPdf')">Compress PDF</li>
        <li onclick="showForm('removeWatermark')">Watermark Remover</li>
      </ul>
    </div>
    <div class="card">
      <h3>Image Tools</h3>
      <ul class="tool-list">
        <li onclick="showForm('imageCompress')">Image Compress (JPG/PNG/WEBP)</li>
        <li onclick="showForm('imageResize')">Image Resize (Custom Dimensions)</li>
        <li onclick="showForm('imageToPdf')">Image to PDF</li>
        <li onclick="showForm('convertImgFormat')">Convert Image Format (JPG/PNG/WEBP)</li>
        <li style="opacity:.7;">Remove Background <span style="color:#abd;">(Coming Soon)</span></li>
      </ul>
    </div>
  </div>
  <div class="divider"></div>

  <div class="form-area" id="formArea"></div>
  <div class="footer">
    DiviPDF &copy; 2025 &middot; Powered by <span>Divisor Studio</span>.
    <br class="credit"/> Free, Fast, Reliable. <span>Built With ❤️ by M Qasim Siddiqui</span>
  </div>

<script>
const API = 'https://divipdf-2.onrender.com';
let formTemplates = {
pdfToWord:`<div class="form-box"><h3>PDF to Word</h3>
<form id="pdfToWordForm"><input type="file" name="file" accept=".pdf" required><br/>
<button>Convert PDF to Word</button></form>
<div class="resultmsg" id="msg_pdfToWord"></div></div>`,
wordToPdf:`<div class="form-box"><h3>Word to PDF</h3>
<form id="wordToPdfForm"><input type="file" name="file" accept=".doc,.docx" required><br/>
<button>Convert Word to PDF</button></form>
<div class="resultmsg" id="msg_wordToPdf"></div></div>`,
mergePdf:`<div class="form-box"><h3>Merge PDFs</h3>
<form id="mergePdfForm"><input type="file" name="files" accept=".pdf" multiple required><br/>
<button>Merge PDFs</button></form>
<div class="resultmsg" id="msg_mergePdf"></div></div>`,
compressPdf:`<div class="form-box"><h3>Compress PDF</h3>
<form id="compressPdfForm"><input type="file" name="file" accept=".pdf" required><br/>
<button>Compress PDF</button></form>
<div class="resultmsg" id="msg_compressPdf"></div></div>`,
removeWatermark:`<div class="form-box"><h3>Remove PDF Watermark</h3>
<form id="removeWatermarkForm"><input type="file" name="file" accept=".pdf" required><br/>
<button>Remove Watermark</button></form>
<div class="resultmsg" id="msg_removeWatermark"></div></div>`,
imageCompress:`<div class="form-box"><h3>Image Compress</h3>
<form id="imageCompressForm"><input type="file" name="file" accept="image/*" required><br/>
<button>Compress Image</button></form>
<div class="resultmsg" id="msg_imageCompress"></div></div>`,
imageResize:`<div class="form-box"><h3>Resize Image (JPG/PNG/WEBP)</h3>
<form id="imageResizeForm"><input type="file" name="file" accept="image/*" required>
<br/>Width: <input type="number" name="width" value="800" required style="width:60px;">
Height: <input type="number" name="height" value="600" required style="width:60px;">
<br/><button>Resize</button></form>
<div class="resultmsg" id="msg_imageResize"></div></div>`,
imageToPdf:`<div class="form-box"><h3>Image to PDF</h3>
<form id="imageToPdfForm"><input type="file" name="file" accept="image/*" required><br/>
<button>Convert Image to PDF</button></form>
<div class="resultmsg" id="msg_imageToPdf"></div></div>`,
convertImgFormat:`<div class="form-box"><h3>Convert Image Format</h3>
<form id="convertImgFormatForm"><input type="file" name="file" accept="image/*" required>
Format: <select name="format">
<option value="JPEG">JPEG</option><option value="PNG">PNG</option><option value="WEBP">WEBP</option>
</select><br/><button>Convert</button></form>
<div class="resultmsg" id="msg_convertImgFormat"></div></div>`
};

function showForm(formKey) {
  let html = formTemplates[formKey];
  document.getElementById("formArea").innerHTML = html || "";
  setTimeout(()=>bindFormHandler(formKey),80);
}

function fileDownload(blob, fname) {
  const link = document.createElement("a");
  link.href = URL.createObjectURL(blob);
  link.download = fname;
  document.body.appendChild(link);
  link.click();
  setTimeout(()=>{URL.revokeObjectURL(link.href);link.remove();},500);
}

function bindFormHandler(formKey) {
  // Map: form id, endpoint, special fields
  const info = {
    pdfToWord:{id:"pdfToWordForm",ep:"/pdf-to-word/", fn:"file", dn:".docx"},
    wordToPdf:{id:"wordToPdfForm",ep:"/word-to-pdf/", fn:"file", dn:".pdf"},
    mergePdf:{id:"mergePdfForm",ep:"/merge-pdf/", fn:"files",multi:true, dn:"merged.pdf"},
    compressPdf:{id:"compressPdfForm",ep:"/compress-pdf/", fn:"file", dn:"_compressed.pdf"},
    removeWatermark:{id:"removeWatermarkForm",ep:"/remove-watermark/",fn:"file",dn:"no-watermark.pdf"},
    imageCompress:{id:"imageCompressForm",ep:"/image-compress/",fn:"file",dn:"compressed.jpg"},
    imageResize:{id:"imageResizeForm",ep:"/image-resize/",fn:"file",dn:"resized.png",extra:["width","height"]},
    imageToPdf:{id:"imageToPdfForm",ep:"/image-to-pdf/",fn:"file",dn:".pdf"},
    convertImgFormat:{id:"convertImgFormatForm",ep:"/convert-image-format/",fn:"file",extra:["format"],dn:"converted" }
  };
  const def = info[formKey]; if(!def) return;
  const form=document.getElementById(def.id);
  if(!form) return;
  form.onsubmit = async e=>{
    e.preventDefault();
    const msgdiv=document.getElementById("msg_"+formKey); msgdiv.innerHTML = `<span class="processing">Processing...</span>`;
    let fd = new FormData();
    let fileInput = form[def.fn];
    let files = fileInput && fileInput.files;
    if(!files || files.length==0){ msgdiv.innerHTML=`<span class="error">Select file(s) required!</span>`; return;}
    if(def.multi){ for(let i=0;i<files.length;i++) fd.append(def.fn,files[i]); }
    else{ fd.append(def.fn, files[0]); }
    if(def.extra){ for(let k of def.extra) fd.append(k, form[k].value);}
    let extName = def.dn; if(def.dn && def.dn[0]==="."){ let n = files[0].name.replace(/\.[^/.]+$/,def.dn); extName=n;}
    try{
      let res = await fetch(API+def.ep,{method:"POST",body:fd});
      if(res.ok){
        let disp = res.headers.get('content-disposition')||'',
            fname = disp.match(/filename="?([^"]+)"?/), downloadName = fname?fname[1]:extName;
        let blob=await res.blob(); fileDownload(blob,downloadName);
        msgdiv.innerHTML = `<span class="success">${downloadName} ready for download!</span>`;
      }else{
        let error; try{error=await res.json();}catch{} msgdiv.innerHTML=`<span class="error">${(error && error.detail)?error.detail:"Server error"} (${res.status})</span>`;
      }
    }catch(ex){
      msgdiv.innerHTML = `<span class="error">Network error: ${ex.message}</span>`;
    }
  };
}
</script>
</body>
</html>

